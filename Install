#!/bin/bash

export DOTDOT="${HOME}/bin/nix_conf"

#Create symlinks for the configs
if [ ! -h ~/.bashrc ]; then
    if [ -f ~/.bashrc ]; then #there's a file there to remove
        mv ~/.bashrc ~/.bashrc.old
    fi;
    ln -s ${DOTDOT}/bashrc ~/.bashrc
    source ~/.bashrc
    if [ -f ~/.bash_profile ]; then
        mv ~/.bash_profile ~/.bash_profile.old
    fi;
    if [ ! -f ~/.bash_profile ]; then
        echo ". ~/.bashrc" >> ~/.bash_profile
    fi
fi;

if [ ! -h ~/.ssh/config ]; then
    ln -s ${DOTDOT}/ssh/config ~/.ssh/config
fi;

if [ ! -h ~/.gitconfig ]; then
    ln -s ${DOTDOT}/git/gitconfig ~/.gitconfig
fi; 

if [ ! -h ~/.gitk ]; then
    ln -s ${DOTDOT}/git/gitk ~/.gitk
fi;

if [ ! -h ~/.vimrc ]; then
    ln -s ${DOTDOT}/vim/vimrc ~/.vimrc
fi;

if [ ! -h ~/.vim ]; then
    ln -s ${DOTDOT}/vim/vim ~/.vim
fi;

if [ ! -h ~/.tmux.conf ]; then
    ln -s ${DOTDOT}/tmux/tmux.conf ~/.tmux.conf
fi;

if [ ! -h ~/.pip ]; then
    mkdir ~/.pip;
    ln -s ${DOTDOT}/pip.conf ~/.pip/pip.conf
fi;

if [ ! -h ~/.pythonstartup ]; then
    ln -s ${DOTDOT}/pythonstartup ~/.pythonstartup
fi;

if [ ! -h ~/.muttrc ]; then
    ln -s ${DOTDOT}/muttrc ~/.muttrc
fi;

#create a .tmp directory for vim backups
if [ ! -d ~/.tmp ]; then
    mkdir ~/.tmp;
fi;

#checkout the pathogen submodules and whatnot
if [ ! "$(ls -A ${DOTDOT}/pathogen)" ]; then
    git submodule update --init
fi;
